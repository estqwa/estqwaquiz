<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Trivia Quiz</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <header>
            <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Trivia Quiz</h1>
            <div id="user-info">
                <span id="username"></span>
                <button id="logout-btn" class="btn btn-danger">–í—ã–π—Ç–∏</button>
            </div>
        </header>
        
        <div class="main-container">
            <div id="login-section" class="section">
                <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                </form>
                <div id="login-error" class="error-message"></div>
            </div>

            <div id="admin-panel" class="hidden">
                <nav>
                    <ul>
                        <li><button id="view-quizzes-btn" class="nav-btn active">–í—Å–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</button></li>
                        <li><button id="create-quiz-btn" class="nav-btn">–°–æ–∑–¥–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</button></li>
                        <li><button id="reset-password-btn" class="nav-btn">–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è</button></li>
                        <li><button id="manage-sessions-btn" class="nav-btn security-feature">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏</button></li>
                        <li><a href="ws-cluster-test.html">–¢–µ—Å—Ç –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏</a></li>
                    </ul>
                </nav>

                <div id="quizzes-section" class="section">
                    <h2>–°–ø–∏—Å–æ–∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω</h2>
                    <div id="quizzes-list"></div>
                </div>

                <div id="create-quiz-section" class="section hidden">
                    <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</h2>
                    <form id="create-quiz-form">
                        <div class="form-group">
                            <label for="quiz-title">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                            <input type="text" id="quiz-title" name="title" required>
                        </div>
                        <div class="form-group">
                            <label for="quiz-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                            <textarea id="quiz-description" name="description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="quiz-scheduled-time">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:</label>
                            <input type="datetime-local" id="quiz-scheduled-time" name="scheduled_time">
                            <small class="form-hint">–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ 10 –º–∏–Ω—É—Ç</small>
                        </div>
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                    </form>
                </div>

                <div id="reset-password-section" class="section hidden">
                    <h2>–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                    <p class="info-text">
                        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Ñ–æ—Ä–º—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π. 
                        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –≤—ã–π–¥–µ–Ω –∏–∑ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞.
                    </p>
                    <form id="reset-password-form">
                        <div class="form-group">
                            <label for="reset-email">Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                            <input type="email" id="reset-email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="reset-new-password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                            <input type="text" id="reset-new-password" name="password" value="123456" required>
                            <small class="form-hint">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å "123456". –†–µ–∫–æ–º–µ–Ω–¥—É–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞.</small>
                        </div>
                        <button type="submit" class="btn btn-warning">–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    </form>
                    <div id="reset-result" class="result-message hidden"></div>
                </div>

                <div id="quiz-details-section" class="section hidden">
                    <div class="back-button">
                        <button id="back-to-quizzes" class="btn">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
                    </div>
                    <h2 id="quiz-details-title"></h2>
                    <div id="quiz-info"></div>
                    
                    <div class="action-buttons">
                        <button id="back-to-quizzes-btn" class="btn btn-secondary">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
                        <button id="schedule-quiz-btn" class="btn btn-primary">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è</button>
                        <button id="cancel-quiz-btn" class="btn btn-warning">–û—Ç–º–µ–Ω–∏—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</button>
                        <button id="add-questions-btn" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</button>
                        <button id="restart-quiz-btn" class="btn btn-info">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</button>
                    </div>

                    <div id="questions-list">
                        <h3>–í–æ–ø—Ä–æ—Å—ã</h3>
                        <div id="quiz-questions"></div>
                        <div id="question-items"></div>
                    </div>

                    <div id="add-questions-form" class="hidden">
                        <h3>–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</h3>
                        <div id="questions-container">
                            <div class="question-item">
                                <div class="form-group">
                                    <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:</label>
                                    <input type="text" class="question-text" required>
                                </div>
                                <div class="form-group">
                                    <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –≤ —Å—Ç—Ä–æ–∫–µ):</label>
                                    <textarea class="question-options" rows="4" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–Ω–∞—á–∏–Ω–∞—è —Å 0):</label>
                                    <input type="number" class="question-correct-option" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label>–í—Ä–µ–º—è –Ω–∞ –æ—Ç–≤–µ—Ç (—Å–µ–∫):</label>
                                    <input type="number" class="question-time-limit" min="5" value="15" required>
                                </div>
                                <div class="form-group">
                                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤:</label>
                                    <input type="number" class="question-points" min="1" value="10" required>
                                </div>
                            </div>
                        </div>
                        <button id="add-more-question" class="btn">+ –î–æ–±–∞–≤–∏—Ç—å –µ—â–µ –≤–æ–ø—Ä–æ—Å</button>
                        <button id="submit-questions" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã</button>
                    </div>

                    <div id="schedule-quiz-form" class="hidden">
                        <h3>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É</h3>
                        <div class="form-group">
                            <label for="schedule-time">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞:</label>
                            <input type="datetime-local" id="schedule-time" required>
                        </div>
                        <button id="submit-schedule" class="btn btn-primary">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div id="quiz-results-section" class="hidden">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
                        <div id="quiz-results"></div>
                    </div>
                </div>

                <div id="restart-quiz-form" class="form-container hidden">
                    <h3>–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h3>
                    <div class="form-group">
                        <label for="restart-time">–ù–æ–≤–æ–µ –≤—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:</label>
                        <input type="datetime-local" id="restart-time" required>
                    </div>
                    <div class="action-buttons">
                        <button type="button" id="submit-restart" class="btn btn-primary">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
                        <button type="button" id="cancel-restart" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="toast" class="toast hidden"></div>
    </div>

    <style>
        .security-feature {
            border-left: 3px solid #ff5722 !important;
            color: #333 !important;
            font-weight: 500 !important;
            display: flex;
            align-items: center;
        }
        .security-feature::before {
            content: "üîê";
            margin-right: 6px;
        }
    </style>

    <!-- –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º app.js –∫–∞–∫ –º–æ–¥—É–ª—å -->
    <script type="module" src="app.js"></script>
    
    <!-- –ó–∞—Ç–µ–º –∑–∞–≥—Ä—É–∂–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="debug.js"></script>
    <script src="token_debug.js"></script>
    
    <script>
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏—è–º–∏
        document.addEventListener('DOMContentLoaded', function() {
            const manageSessionsBtn = document.getElementById('manage-sessions-btn');
            if (manageSessionsBtn) {
                manageSessionsBtn.addEventListener('click', function() {
                    window.location.href = 'sessions.html';
                });
            }
        });
    </script>
</body>
</html> 